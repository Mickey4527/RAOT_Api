# ระบบสารสนเทศเพื่อการจัดการแผนที่เกษตรชาวสวนยางเพื่อการบริหารจัดการเชิงรุก (ส่วนของหลังบ้าน)
  ⚠️ *ระบบเป็นกรณีศึกษาเท่านั้น การทำงานอาจไม่ถูกต้องหรือผิดพลาด โปรดพิจารณาการใช้งาน*⚠️
  
  ระบบนี้เป็นส่วนหนึ่งของโครงงานวิจัยเรื่อง การพัฒนาระบบสารสนเทศเพื่อการจัดการแผนที่เกษตรชาวสวนยางเพื่อการบริหารจัดการเชิงรุก โดยมีวัตถุประสงค์เพื่อพัฒนาระบบสารสนเทศที่นำเสนอข้อมูลในรูปแบบรายงาน พร้อมทั้งระบบพยากรณ์ผลผลิตยางพาราและพื้นที่ความเหมาะสม ระบบนี้ถูกออกแบบมาเพื่อประเมินประสิทธิภาพและประสิทธิผลของการพยากรณ์ผลผลิตและพื้นที่ความเหมาะสมของการปลูกยางพาราในจังหวัดภาคใต้ของประเทศไทย โดยใช้กระบวนการเหมืองข้อมูลเป็นเครื่องมือหลักในการพัฒนา

## Introduction
  ระบบนี้ได้สร้างขึ้นเพื่อใช้ในการวิเคราะห์และพยากรณ์ปัจจัยความเหมาะสมของพื้นที่ปลูกยางพาราและผลผลิตยางพารา อีกทั้งยังช่วยในการรายงานเชิงวิเคราะห์ให้หน่วยงานที่เกี่ยวข้องสามารถเรียกดูรายงานในมุมมองที่หลากหลายและใช้สนับสนุนการตัดสินใจและวางแผน         กลยุทธ์ต่าง ๆ โดยรองรับการทำงานผ่านเว็บแอปพลิเคชัน

### 1. **คุณสมบัติและฟังก์ชันหลักของระบบ**
  ระบบประกอบด้วยฟังก์ชั่นหลักต่อไปนี้

- เข้าสู่ระบบ - ผู้ใช้สามารถลงชื่อเข้าใช้ระบบผ่านบัญชีที่มีการกำหนดโดยผู้ดูแลระบบเท่านั้น
- เครื่องมือในการคาดการณ์ผลผลิตเบื้องต้นตามสภาพพื้นที่ได้ - ระบบสามารถวิเคราะห์ข้อมูลสภาพแวดล้อมของพื้นที่เพื่อประเมินปริมาณผลผลิตยางพาราที่คาดการณ์ได้
- เครื่องมือในการคาดการณ์ความเหมาะสมในการเลือกเพาะปลูกยางพาราของพื้นที่และรับข้อมูลคำแนะนำได้ - ระบบช่วยประเมินว่าสภาพพื้นที่เหมาะสมต่อการเพาะปลูกยางพาราหรือไม่ พร้อมให้คำแนะนำที่เกี่ยวข้อง
- รายงานวิเคราะห์และสถิติการปลูกยางพาราได้ - ระบบจัดทำรายงานเชิงลึกเกี่ยวกับแนวโน้มการปลูกยางพารา เช่น ปริมาณผลผลิตเฉลี่ย และปัจจัยที่ส่งผลต่อผลผลิต
- รายงานภาพรวมและสถิติการปลูกยางพาราได้ - แสดงข้อมูลสรุปและสถิติโดยรวมของพื้นที่เพาะปลูกยางพาราในระดับที่กำหนด เช่น รายจังหวัดหรือระดับประเทศ
- การดาวน์โหลดข้อมูลสถิติออกมาในรูปแบบไฟล์ดิจิทัลได้ - ผู้ใช้สามารถส่งออกข้อมูลสถิติที่เกี่ยวข้องในรูปแบบไฟล์ เช่น CSV หรือ Excel เพื่อนำไปใช้ในการวิเคราะห์เพิ่มเติม

### 2. **ข้อกำหนดขั้นต่ำของอุปกรณ์ที่รองรับ**  
  เพื่อให้ระบบทำงานได้อย่างราบรื่น อุปกรณ์ของผู้ใช้จะต้องมีคุณสมบัติตรงตามข้อกำหนดขั้นต่ำดังต่อไปนี้

- ระบบปฏิบัติการ: วินโดวส์ 10 เวอร์ชั่น 22H2 ขึ้นไปหรือเทียบเท่า
- ต้องมีการเชื่อมต่ออินเทอร์เน็ต
- เว็บเบราว์เซอร์ที่ใช้เอนจิ้นโครเมี่ยม (Chromium) เวอร์ชั่น 131 ขึ้นไปหรือเทียบเท่า

## Tech Stack
* Python version 3.13 
* FastAPI framework version 0.115.11
## Install and setup
### requirements
* Docker version x.xx
* Postgres version x.xx
### Install (for production)
1. ติดตั้ง Docker Git และ Docker Compose (ถ้ายังไม่มี)
2. สร้างโฟลเดอร์สำหรับจัดเก็บระบบโดยใช้คำสั่ง `mkdir <ชื่อที่ต้องการใช้>` จากนั้นเข้าไปในโฟลเดอร์โดยใช้คำสั่ง `cd <ชื่อโฟลเดอร์ที่ใช้>`
3. ดาวน์โหลดหรือ Clone โปรเจ็กต์โดยใช้คำสั่ง “git clone <repository-url>” โดยให้โคลนทั้งหน้าบ้านและหลังบ้าน
4. ใช้คำสั่ง “ls” เพื่อตรวจสอบไฟล์ที่อยู่ในโฟลเดอร์โดยจะต้องมีสองโฟลเดอร์โดยโฟลเดอร์ทั้งสองประกอบด้วย หลังบ้านที่มีชื่อโฟลเดอร์ว่า raot_api
5.  เข้าไปที่โฟลเดอร์หลังบ้านจากนั้นให้ตรวจสอบไฟล์ในโฟลเดอร์ จากนั้นให้เข้าไปที่โฟลเดอร์ที่ชื่อว่า setup ใช้คำสั่ง `ls -a` ตรวจสอบไฟล์ในโฟลเดอร์ จะต้องมี docker-compose.yml, nginx.conf และ .env.template 
6.  ใช้คำสั่ง `mv docker-compose.yml nginx.conf .env.template ~/<ชื่อโฟลเดอร์ที่ใช้>/` เพื่อย้ายไฟล์ที่ใช้ในการตั้งค่าไว้ที่โฟลเดอร์หลัก จากนั้นใช้คำสั่ง `cd ~/<ชื่อโฟลเดอร์ที่ใช้>` เพื่อกลับไปยังโฟลเดอร์หลัก จากนั้นใช้คำสั่ง `ls -a` ตรวจสอบไฟล์ในโฟลเดอร์ เพื่อตรวจสอบไฟล์ที่ย้าย
7. เข้าไปที่ไฟล์ .env.template โดยใช้คำสั่ง nano หรือ vim เพื่อแก้ไขไฟล์
#### คำอธิบาย Environment Variable

| **Environment Variable**       | **คำอธิบาย**                                                                                                  |
|--------------------------------|----------------------------------------------------------------------------------------------------------------|
| **DOMAIN**                     | ชื่อโดเมนของระบบ เช่น `example.com`                                                                            |
| **FRONTEND_HOST**              | ที่อยู่ของ Frontend เช่น `http://localhost:3000` หรือ URL ที่ใช้งานใน Production                              |
| **PREDICT_API_URL**            | URL ของ API สำหรับการทำนายผล เช่น `http://localhost:8000/predict`                                           |
| **ENVIRONMENT**                | ระบุสภาพแวดล้อม เช่น `local`, `staging`, `production`, `datasci_test`                                       |
| **PROJECT_NAME**               | ชื่อโปรเจ็กต์ที่ใช้งาน                                                                                        |
| **STACK_NAME**                 | ชื่อสแต็ก (เช่น Docker Stack หรือ Kubernetes Stack)                                                             |
| **DEBUG**                      | ระบุว่าเปิดใช้งานโหมด Debug หรือไม่ (ค่าตัวอย่าง: `true` หรือ `false`)                                     |
| **POSTGRES_SERVER**            | ที่อยู่ของเซิร์ฟเวอร์ PostgreSQL                                                                                |
| **POSTGRES_PORT**              | พอร์ตที่ใช้งานสำหรับ PostgreSQL (ค่าเริ่มต้นคือ `5432`)                                                       |
| **POSTGRES_USER**              | ชื่อผู้ใช้สำหรับเชื่อมต่อกับฐานข้อมูล PostgreSQL                                                              |
| **POSTGRES_PASSWORD**          | รหัสผ่านของผู้ใช้สำหรับเชื่อมต่อกับฐานข้อมูล PostgreSQL                                                      |
| **POSTGRES_DB**                | ชื่อฐานข้อมูลที่ใช้งานใน PostgreSQL                                                                             |
| **SMTP_HOST**                  | ที่อยู่เซิร์ฟเวอร์ SMTP (สำหรับส่งอีเมล)                                                                         |
| **SMTP_USER**                  | ชื่อผู้ใช้สำหรับการเชื่อมต่อกับ SMTP                                                                            |
| **SMTP_PASSWORD**              | รหัสผ่านของผู้ใช้สำหรับการเชื่อมต่อกับ SMTP                                                                   |
| **EMAILS_FROM_EMAIL**          | อีเมลต้นทางที่ใช้ในการส่งอีเมล                                                                                 |
| **SMTP_TLS**                   | เปิดใช้งาน TLS หรือไม่ (เช่น `true` หรือ `false`)                                                                |
| **SMTP_SSL**                   | เปิดใช้งาน SSL หรือไม่ (เช่น `true` หรือ `false`)                                                                |
| **SMTP_PORT**                  | พอร์ตสำหรับเชื่อมต่อกับ SMTP                                                                                    |
| **BACKEND_CORS_ORIGINS**       | URL ที่ได้รับอนุญาตให้เชื่อมต่อจาก (Cross-Origin Resource Sharing)                                           |
| **SECRET_KEY**                 | คีย์ลับสำหรับการเข้ารหัสและการเซ็นต์ข้อมูล (ใช้ใน JWT หรือการเข้ารหัสอื่น ๆ)                              |
| **ALGORITHM**                  | อัลกอริธึมที่ใช้ในการเข้ารหัส (เช่น `HS256` สำหรับ JWT)                                                      |
| **ACCESS_TOKEN_EXPIRE_MINUTES**| เวลาหมดอายุของ Token ในหน่วยนาที เช่น `30` นาที                                                              |
| **JWT_SUBJECT**                | หัวข้อของ JWT (เช่น `user`)                                                                                   |
| **FIRST_SUPERUSER**            | ชื่อผู้ใช้ของผู้ดูแลระบบเริ่มต้น                                                                                 |
| **FIRST_SUPERUSER_EMAIL**      | อีเมลของผู้ดูแลระบบเริ่มต้น                                                                                     |
| **FIRST_SUPERUSER_PASSWORD**   | รหัสผ่านของผู้ดูแลระบบเริ่มต้น                                                                                  |
| **FIRST_SUPERUSER_PHONE**      | เบอร์โทรศัพท์ของผู้ดูแลระบบเริ่มต้น                                                                             |
| **FIRST_SUPERUSER_ROLE**       | บทบาทของผู้ดูแลระบบเริ่มต้น                                                                                   |
| **FIRST_SUPERUSER_ROLE_DESCRIPTION** | คำอธิบายบทบาทของผู้ดูแลระบบเริ่มต้น                                                                        |
| **CSV_FILES_IMPORT**           | รายการไฟล์ CSV ที่จะนำเข้าหรือโหลดลงในระบบพร้อมกับโมเดลที่เกี่ยวข้อง                                         |
| **SENTRY_DSN**                 | URL สำหรับเชื่อมต่อกับ Sentry (ใช้ในการติดตามข้อผิดพลาดและบันทึกเหตุการณ์ต่าง ๆ)                           |
| **DOCKER_IMAGE_BACKEND**       | ชื่อ Docker image ที่ใช้สำหรับ Backend ของโปรเจ็กต์นี้                                                           |

เมื่อตั้งค่าเรียบร้อยแล้วให้บันทึกค่า จากนั้นใช้คำสัง `mv .env.template .env` เพื่อเปลี่ยนชื่อและใช้คำสั่ง `cd ~/<ชื่อโฟลเดอร์ที่ใช้>` เพื่อกลับไปยังโฟลเดอร์หลัก

8. เข้าไปที่ไฟล์ nginx.conf โดยใช้คำสั่ง nano หรือ vim เพื่อแก้ไขไฟล์ ให้เปลี่ยนหลังคำว่า sever name เป็น Domain ที่ต้องการใช้ในการเข้าถึงหลังบ้าน
### Docker
การตั้งค่าเพื่อเริ่มใช้งานบน docker
1. ใช้คำสั่ง `docker compose -f docker-compose.yml up -d` หรือ `docker-compose up -d –build` (อาจใช้เวลาสักครู่ขึ้นอยู่กับความเร็วอินเทอร์เน็ต)
2. เมื่อเรียบร้อยแล้วใช้คำสั่ง `docker ps` เพื่อตรวจสอบ
